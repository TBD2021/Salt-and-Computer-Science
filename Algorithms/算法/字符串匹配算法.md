# 字符串匹配（模式匹配）算法

**Topics:**

- 概述
- 暴力算法
- Rabin-Karp算法
- KMP算法

## 概述

字符串匹配，也叫模式匹配（String-matching, String-searching or Pattern-matching）。

**字符串匹配问题**

假如有一个长度为 n 的字符串 T（称为文本）和一个长度为 m (m ≤ n) 的字符串 P（称为模式串）。如果文本 T 中自第 s+1 个字符到第 s+m 个字符与模式串 P 完全相同，则称为模式串 P 在文本 T 中出现且有效位移为 s。那么字符串匹配问题就可以简单概括为，在给定的文本 T 中找出模式串 P 的所有有效位移 s。

在字符串匹配问题中，用n表示文本 T 的长度，m 表示模式串 P 的长度，用符号 Σ 表示由所有字符构成的字母表，Σ是一个有限集合。

## 暴力算法

用暴力算法（Naive String Matching）解决字符串匹配问题，就是从文本 T 的第一个字符开始，从前向后逐个比较，判断是否与模式串 P 匹配。

暴力算法一共要比较 n-(m-1)次，每次比较 m 个字符，因此时间复杂度为 O（（n-m+1）*m）。

### Rabin-Karp 算法

与暴力算法相同，Rabin-Karp 算法也会逐个检查文本的每个substring是否与模式串 P 匹配。不同的是，Rabin-Karp 算法比较的是哈希值，如果子字符串 s 与模式串 P 的哈希值相同，就再进一步比较 s 与 P 是否匹配，如果匹配则返回 s 的起始位置。

在 Rabin-Karp 算法中，哈希值是使用滚动哈希函数（roling hash function）计算的。滚动哈希函数通过在完成匹配的旧字符串中删除头部字符，添加尾部字符，从而计算后继字符串的哈希值用于下一次比较。这种在文本 T 上滚动计算哈希值的方式，无需从头开始计算整个字符串的哈希值，能够更高效地完成更新。

**【算法-Rabin-Karp】**

```
function RabinKarp(string text[1..n], string pattern[1..m])
    hp := hash(pattern[1..m]);
    for i from 1 to n-m+1
        hs := hash(s[i..i+m-1])
        if hs = hp
            if text[i..i+m-1] = pattern[1..m]
                return i
    return not found
```

** 【Hash function】**

1. 首先，选择合适的数基 b 和 模 （base，指进位制中用以乘每个数位而得到有效值的数，如十进制的数基为10），一般选择字符表 Σ 的总字符数。
### KMP算法

